<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√≥digo de Verifica√ß√£o - Defensoria P√∫blica</title>
    <style>
        /* Mantenha todo seu CSS atual */
        
        .copy-container {
            position: relative;
            margin: 20px 0;
        }
        
        .copy-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #10B981;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 15px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .copy-button:hover {
            background: #059669;
        }
        
        .copy-button.copied {
            background: #059669;
        }
        
        .token-with-copy {
            position: relative;
            padding-right: 100px;
        }
        
        .success-message {
            display: none;
            color: #10B981;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="/static/images/logo_defensoria_publica.png" alt="Defensoria P√∫blica" class="logo-image">
        </div>

        <div class="content">
            <h1>C√≥digo de Verifica√ß√£o</h1>
            
            <div class="user-info">
                Prezado(a) <strong>{{ user_name }}</strong>
            </div>
            
            <div class="message">
                <p>Para continuar com seu atendimento, utilize o c√≥digo abaixo no chat da Defensoria P√∫blica:</p>
            </div>
            
            <div class="token-container">
                <div style="margin-bottom: 10px; font-size: 14px;">C√ìDIGO DE VERIFICA√á√ÉO</div>
                
                <div class="copy-container">
                    <div class="token token-with-copy">{{ token }}</div>
                    <button class="copy-button" onclick="copyToClipboard('{{ token }}', this)">
                        üìã Copiar
                    </button>
                </div>
                
                <div id="copy-success" class="success-message">
                    ‚úÖ C√≥digo copiado para a √°rea de transfer√™ncia!
                </div>
                
                <div style="margin-top: 10px; font-size: 12px; opacity: 0.8;">
                    V√°lido por {{ expires_minutes }} minutos
                </div>
            </div>
            
            <div class="instructions">
                <p><strong>Como usar:</strong></p>
                <ol style="margin: 10px 0; padding-left: 20px;">
                    <li><strong>Volte ao chat</strong> da Defensoria P√∫blica</li>
                    <li><strong>Cole ou digite</strong> o c√≥digo acima</li>
                    <li><strong>Aguarde a confirma√ß√£o</strong> para continuar</li>
                </ol>
                <p><em>Dica: Clique no bot√£o "üìã Copiar" para facilitar.</em></p>
            </div>
            
            <!-- Mantenha o resto do seu template -->
            
        </div>
    </div>

    <script>
        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(function() {
                // Feedback visual
                button.innerHTML = '‚úÖ Copiado!';
                button.classList.add('copied');
                
                const successMsg = document.getElementById('copy-success');
                successMsg.style.display = 'block';
                
                // Volta ao normal ap√≥s 3 segundos
                setTimeout(function() {
                    button.innerHTML = 'üìã Copiar';
                    button.classList.remove('copied');
                    successMsg.style.display = 'none';
                }, 3000);
            }).catch(function(err) {
                console.error('Erro ao copiar: ', err);
                button.innerHTML = '‚ùå Erro';
                setTimeout(function() {
                    button.innerHTML = 'üìã Copiar';
                }, 2000);
            });
        }
    </script>
</body>
</html>